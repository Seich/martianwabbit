<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /> 

	<title>Sergio Díaz  | Postgres: Checking Queries in Real Time </title>
	
	<link rel="stylesheet" href="/css/screen.css">
	<link rel="alternate" type="application/rss+xml" title="RSS Feed for martianwabbit.com" href="http://feeds.feedburner.com/SeichysMissingBit" />

	<script src="/js/highlight.pack.js"></script>
</head>
<body>

<div id="top">
	<h1><a href="/">Sergio Díaz<span>.</span></a></h1>
</div>

<article>
	<h1>
		<a href="">Postgres: Checking Queries in Real Time</a>
	</h1>

	<aside>
		<time>Posted on: June 10, 2015</time>
		<span>156 Words</span>
		<span>Takes 1 minutes to read</span>
	</aside>

	<p>Recently I came around a really simple way of checking what queries are going on in Postgres at any given time. Basically what you want to do is tell Postgres to log all queries and then you can tail the log file.</p>

<p>The first step is to tell Postgres to log all queries. To do that you go to your postgresql.conf file (mine’s here: ~/Library/Application Support/Postgres/var-9.4) and set the following options:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">logging_collector = on
log_directory = ‘pg_log’
log_statement = ‘all’
</code></pre></div>
<p>Once you’ve configured these values Postgres will be dumping all queries into the current log file at pg_log. Now you can tail your log file and see what queries are happening in real time.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"># Change this to your log’s folder.

tail -f ~/Library/Application\ Support/Postgres/var-9.4/pg_log/* 
</code></pre></div>
<p>Also, it’s worth knowing that Pg Admin has a log viewer you can use for this task. Just go to Tools &gt; Server Status and you should get this window:</p>

<p><img src="https://dl.dropboxusercontent.com/u/8252879/martianwabbit/pg_admin.png" alt=""></p>


	<div id="disqus_thread"></div>
	<script type="text/javascript">
		/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
		var disqus_shortname = 'martianwabbitblog'; // required: replace example with your forum shortname

		/* * * DON'T EDIT BELOW THIS LINE * * */
		(function() {
			var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
			dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
			(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		})();
	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</article>

<footer>
	<p>David Sergio Díaz © All Rights Reserved.</p>
	<p>Happily hosted on <a href="http://www.webfaction.com?affiliate=seich">WebFaction</a>.</p>
</footer>

	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-2565966-9', 'auto');
		ga('send', 'pageview');
	</script>
</body>
</html>