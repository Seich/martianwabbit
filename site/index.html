<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>


	<title>Seichy's Missing Bit </title>
	
	<link rel="stylesheet" href="/css/screen.css">
	<link rel="alternate" type="application/rss+xml" title="RSS Feed for martianwabbit.com" href="http://feeds.feedburner.com/SeichysMissingBit" />

	<script src="/js/highlight.pack.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>
</head>
<body>

<div class="container">
	<header id="top">
		<h1>
			<a href="/">Seichy's Missing Bit</a>
		</h1>
	</header>

	<div class="content">

	<article class="post" id="Scroll Spying for Fun and Profit">
		<header>
			<h1>
				<a href="/2014/04/04/scroll-spying-for-fun-and-profit.html">Scroll Spying for Fun and Profit</a>
			</h1>
			<time>April 04, 2014</time>
		</header>

		<p>I recently redesigned by blog. One of the new features is a menu that highlights the current post you are on. <img class='small' src='http://f.cl.ly/items/133x0c1u0K0g0Y3g0g1W/scrollspying.gif' /></p>

<p>To achieve this, I used <a href="http://zeptojs.com/">Zepto</a> and a small amount of math. (The great thing about Zepto is that it’s fully compatible with jQuery, so this should work with jQuery out of the both as well).</p>

<p>Let’s jump right in, here’s how I do it:</p>
<pre>
<code>
var article_offsets = $('article').map(function() { 
	return $(this).offset().top
});

$(window).on('scroll', function() {
	for (var i = 0; i &lt; article_offsets.length; i++) {
		if (article_offsets[i] &gt; scrollTop &amp;&amp; 
		article_offsets[i] &lt; scrollTop + $(window).height()) 
		{
			$('.sidebar li')
				.removeClass('active')
				.eq(i).addClass('active');
		}
	};
});
</code>
</pre>
<p>The first line:</p>

<pre><code>var article_offsets = $(&#39;article&#39;).map(function() { 
	return $(this).offset().top 
});</code></pre>

<p>Grabs all of the vertical positions (from now on, offsets) of the elements I want to match and makes an array out of them. In this case, I am targeting the articles since, those represent my blog posts.</p>

<p>After that, I am binding an event to the window’s scroll. Whenever the page is scrolled, we iterate over all of our scroll positions, if we find ourselves scrolled after one of the offsets and before the window height, we call:</p>

<pre><code>$(&#39;.sidebar li&#39;).removeClass(&#39;active&#39;).eq(i).addClass(&#39;active&#39;);</code></pre>

<p>Which looks for the Ith element on the sidebar’s list (which should match out Ith article element) and we add a class of ‘active’ to it, highlighting it and doing whatever we want with it.</p>

<p>There’s a couple of other (bigger, more complex and probably more robust) solutions to this problem out there. Here’s a couple I came through:</p>

<ul>
<li><a href="http://getbootstrap.com/javascript/#scrollspy">http://getbootstrap.com/javascript/#scrollspy</a></li>

<li><a href="http://www.outyear.co.uk/smint/">http://www.outyear.co.uk/smint/</a></li>

<li><a href="http://scrollnav.com/">http://scrollnav.com/</a></li>
</ul>

<p>I am pretty sure they are plenty of others, for my evil purposes, my tiny script fulfills my needs.</p>
	</article>

	<article class="post" id="2014">
		<header>
			<h1>
				<a href="/2014/01/26/2014.html">2014</a>
			</h1>
			<time>January 26, 2014</time>
		</header>

		<p>I know I am a little late doing the whole goal setting and year review thing but, this year I wanted to try something different. I wanted to see how January turned out before setting goals.</p>

<p>This year will be pretty exciting. I’ll continue working as a consultant as I have for the past couple of years. Invivo Link is doing some pretty cool things and I am happy to help them continue building their product. Over at <a href="http://www.2build.it">2build.it</a>, we’re working with some pretty cool clients, building a variety of pretty cool things, hopefully the company will grow a whole lot this year.</p>

<p>I tend to decide what I’d like to learn more during the year. This year’s language is going to be Rust. I’ve fallen in love with it on the past couple of months and I’d like to start building more things with it as the language becomes more stable. Apart from Rust, this year I’ll be working with Objective-C a whole lot more. I don’t fully like the language yet but, I feel like it can be a valuable tool in my toolset. I’ll also continue working on bundle.js as it has become essential to a client’s project which, turns out to be a great way to further develop it.</p>

<p>I’d also like to write more, I didn’t get to do it as much as I wanted to last year so I’ve adjusted my goal, I want to write at least, 12 posts during the year. I think this is a reasonable quantity and I hope I’ll be able to reach it. I’d also like to read more, my goal for that is at least 52 books. I am up to speed so far so I am pretty sure I can reach that.</p>

<p>Finally, I’d like a travel more this year, I am getting a little tired and burned out and I feel that it would help me to travel and see things.</p>

<p>I achieved most of the important goals from last year so, I am looking forward to a great year.</p>
	</article>

	<article class="post" id="You've Gotta Love Deferreds">
		<header>
			<h1>
				<a href="/2013/11/12/youve-gotta-love-deferreds.html">You've Gotta Love Deferreds</a>
			</h1>
			<time>November 12, 2013</time>
		</header>

		<p>Deferreds are awesome. They are such a simple solution to a really hard problem. Keeping things async in javascript can get hard sometimes. I recently wrote some code that looked like this:</p>
<pre>
<code data-language='html'>
var settings = {
	template: 'todo.hbs',
	data_src: '/todo.json'
};
	
var template;
	
var getting_template;
var getting_data;
	
if ('template' in settings) {
	getting_template = $.get(settings.template);
	
	getting_template.done(function(t) {
		template = t;
	});
	
	if ('data_src' in settings) {
		getting_data = $.get(settings.data_src);
		getting_data.done(function(data) {
			render(template, data);
		});
	} else {
		getting_template.done(function(t) {
			render(t, {});
		});
	}
} else {
	render('', {});
}
</code>
</pre>
<p>(I am pretty sure it wasn’t necessarily as ugly but, I don’t quite remember.)</p>

<p>As you can see, even though I am making use of the deferreds returned by the <code>$.get</code> function. This could be cleaned up a lot by using even more deferreds.</p>

<p>Here’s more or less what the code ended up looking like:</p>
<pre>
<code data-language='html'>
var settings = {
	template: 'todo.hbs',
	data_src: '/todo.json'
};

var templateDefer = new $.Deferred();
var dataDefer; = new $.Deferred();

if ('template' in settings) {
	$.get(settings.template, function(template) {
		templateDefer.resolve(template);
	});
} else {
	templateDefer.resolve('');
}

if ('data_src' in settings) {
	$.get(settings.data_src, function(data) {
		dataDefer.resolve(data);
	});
} else {
	dataDefer.resolve({});
}

$.when(templateDefer, dataDefer).done(function(template, data) {
	render(template, data);
});
</code>
</pre>
<p>I basically kept everything async using stand-alone deferreds. Turns out jQuery has really handy deferred util built-in, all you have to do is create a new one (<code>new $.Deferred()</code>). The other handy thing built into jQuery is the <code>$.when</code> method, you can basically pass in a bunch of deferreds and you’d get a single one that responds when all of them respond in a particular way. That way, you can basically say, when they are all done, do this.</p>

<p>I shall try experimenting a lot more with these tools, they are pretty easy to use and pack in, so much functionality.</p>

<h2 id="recommended_links">Recommended links</h2>

<p>Here’s a couple of recommended links, in case you want to learn more about deffereds, in particular, those built into jQuery:</p>

<ul>
<li><a href="http://api.jquery.com/category/deferred-object/">jQuery’s Deferred Object Documentation</a></li>

<li><a href="http://vvv.tobiassjosten.net/javascript/jquery-deferreds-promises-asynchronous-bliss/">jQuery Deferreds promises asynchronous bliss</a></li>

<li><a href="http://promises-aplus.github.io/promises-spec/">Promises A+ Spec</a></li>
</ul>
	</article>

	<article class="post" id="A Semantic Grid with Zurb's Foundation">
		<header>
			<h1>
				<a href="/2013/10/11/a-semantic-grid-with-foundation.html">A Semantic Grid with Zurb's Foundation</a>
			</h1>
			<time>October 11, 2013</time>
		</header>

		<p><a href="http://foundation.zurb.com">Foundation</a> is great. I love it, I use it whenever I am building anything big. My favorite feature and the one key thing that has kept me as a fan for so long has been it's grid. I feel like it's the best grid we have available so far.</p>

<p>
    My favorite thing about that grid you ask? Apart from just being plainly awesome? Well, it's the semantic option. I know you probably haven't put much thought into it but, don't you feel like grid classes tend to clutter the html? I do, and I hate it. Enter the mixins!
</p>

<h2>The Mixins</h2>
<p>
    To alleviate this issue, Foundation gives us a set of really handy mixins which allow you to build a really semantic grid. It's as flexible as it can be and just as easy to use (I'd argue that if you're familiar with sass, it's just plainly easier and requires less typing).
</p>

<p>To demonstrate, I'll be showing you how to build this:</p>
<div>
    <img src="http://f.cl.ly/items/08411t3C1f393p3W2B0G/Screen%20Shot%202013-10-11%20at%2012.45.18%20PM.png" alt="Demo">
</div>

<p>As you can see, it's a very simple layout. It'd be really easy to build it using the grid classes, it's even easier to build it using the mixins. Here's my markup:</p>
<pre>
<code data-language="html">&lt;article&gt;
  &lt;header&gt;
    &lt;h1&gt;Hello World&lt;/h1&gt;
  &lt;/header&gt;
  
  &lt;div&gt;
      &lt;img src=&quot;http://lorempixel.com/300/400/&quot;&gt;
  &lt;/div&gt;

  &lt;p&gt;
    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Exercitationem, voluptatibus, deserunt, facilis iusto sapiente impedit praesentium laudantium minus voluptas numquam incidunt corrupti sequi laboriosam magnam officia perspiciatis quas quam quaerat!
  &lt;/p&gt;
&lt;/article&gt;
</code>
</pre>

<p>As you can see it's pretty standard except the elements lack classes and such. Much prettier than usual in my opinion.</p>

<p>Here's my CSS:</p>

<pre>
<code data-language="css">@import "foundation/components/global";
@import "foundation/components/grid";

$total-columns: 5;
article {
  @include grid-row;

  header {
    @include grid-row;

    h1 {
      @include grid-column(5);  
    }
  }

  div {
    @include grid-column(2);
  }

  p {
    @include grid-column(3);
  }
}
</code>
</pre>

<p>Awesome, right? Here I am the grid-column and grid-row mixins to create the grid directly in my CSS. All you have to do is import the mixins. There are also many options to customize the grid, in this case I changed the number of columns from the default 12, to 5. I am also nesting rows, all from the CSS, leaving the HTML to describe it's thing. </p>

<h3>Side note:</h3>
<p>I hadn't notice that in this case you're putting a row directly inside another row, this isn't ideal as it can cause alignment issues. Ideally you'd have the header inside full width column to prevent this. I don't think it matters in this example but in anything more complex it might be a pain to debug.</p>

<p>Thanks to <a href="https://twitter.com/smiley">@smiley</a> for the heads up!</p>

<h2>Conclusion</h2>
<p>I feel like this technique is a great way to simplify the HTML and further decouple it from it's CSS. They've been several similar things before such as the <a href="http://semantic.gs/">Semantic Grid</a> which experimented with this idea. Foundation has a much more powerful grid so, it being able to work this way as well makes me really happy.</p>
	</article>

	<article class="post" id="Connecting To A Remote RethinkDB Admin Interface">
		<header>
			<h1>
				<a href="/2013/07/20/connecting-to-a-remote-rethinkdb-admin-interface.html">Connecting To A Remote RethinkDB Admin Interface</a>
			</h1>
			<time>July 20, 2013</time>
		</header>

		<p>
	So here's a really quick tip, when you run a RethinkDB instance on a remote server you cannot access the admin interface, by default, from the outside of the server. The easiest way to get around this without allowing anyone to access it is to use a ssh tunnel like this:
</p>

<pre>
	<code data-language="shell">
$ ssh -L 8080:localhost:8080 &lt;host&gt;
	</code>
</pre>

<p>
	This basically uses ssh to map the port 8080 of your machine (127.0.0.1 or localhost) to the port 8080 on the host machine. Don't forget to replace "&lt;host&gt;" with your actual remote host.
</p>

<p>
	With this, you can now connect to the admin interface by going to localhost:8080 on your machine. Note that this will only work as long as the ssh connection remains open.
</p>

<h2>Additional Resources</h2>
<p>
	<a href="http://www.symantec.com/connect/articles/ssh-port-forwarding">SSH Port Forwarding - Symatec</a> <br>
	<a href="https://help.ubuntu.com/community/SSH/OpenSSH/PortForwarding">SSH/OpenSSH/PortForwarding - Ubuntu Community Documentation</a>
</p>
	</article>

</div>


<div class="sidebar">
	<div class="icons">
		<a href="https://www.github.com/seich" class="github">&#62208;</a>
		<a href="https://www.twitter.com/seich" class="twitter">&#62217;</a>
		<a href="http://www.last.fm/user/Seichleon" class="lastfm">&#62241;</a>
	</div>
	<ul>
	
		<li>
			<a href="#Scroll Spying for Fun and Profit">Scroll Spying for Fun and Profit</a>
			<time>April 04, 2014</time>
		</li>
	
		<li>
			<a href="#2014">2014</a>
			<time>January 26, 2014</time>
		</li>
	
		<li>
			<a href="#You've Gotta Love Deferreds">You've Gotta Love Deferreds</a>
			<time>November 12, 2013</time>
		</li>
	
		<li>
			<a href="#A Semantic Grid with Zurb's Foundation">A Semantic Grid with Zurb's Foundation</a>
			<time>October 11, 2013</time>
		</li>
	
		<li>
			<a href="#Connecting To A Remote RethinkDB Admin Interface">Connecting To A Remote RethinkDB Admin Interface</a>
			<time>July 20, 2013</time>
		</li>
	
	</ul>

	
	<div class="pagination">
		
			<span class="previous">Previous Page</span>
		
		/
		
			<a href="/page2" class="next">Next Page</a>
		

		<p>-1-</p>
	</div>
	
</div>

	<footer>
		David Sergio Díaz &copy; All Rights Reserved.
		<br>
		Happily hosted on <a href="http://www.webfaction.com?affiliate=seich">WebFaction</a>
	</footer>
</div>

	<script src="/js/zepto.js"></script>
	<script src="/js/main.js"></script>
	<script>
        var _gaq=[['_setAccount','UA-2565966-9'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
    </script>
</body>
</html>