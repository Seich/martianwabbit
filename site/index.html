<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>


	<title>Seichy's Missing Bit </title>
	
	<link rel="stylesheet" href="/css/screen.css">
	<link rel="alternate" type="application/rss+xml" title="RSS Feed for martianwabbit.com" href="http://feeds.feedburner.com/SeichysMissingBit" />

	<script src="/js/highlight.pack.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>
</head>
<body>

<div class="container">
	<header id="top">
		<h1>
			<a href="/">Seichy's Missing Bit</a>
		</h1>
	</header>

	<div class="content">

	<article class="post" id="Using mailgun to receive emails with Phabricator">
		<header>
			<h1>
				<a href="/2014/04/21/using-mailgun-to-receive-emails-with-phabrication.html">Using mailgun to receive emails with Phabricator</a>
			</h1>
			<time>April 21, 2014</time>
		</header>

		<p><a href="http://phabricator.com">Phabricator</a> is awesome. We recently started trying it out for <a href="http://2build.it">2build.it</a> (more like, this morning) and we all (<a href="http://jorge.caballeromurillo.com">Jorge</a> and I) agreed it’s awesome.</p>

<p>The setup is pretty straight-forward and only took like 20 minutes. The one thing I got stuck on though, was the emailing. It took me forever to realise that you’re supposed to restart the emailing daemons for the configuration to stick. It is my fault but, this wasn’t mentioned anywhere in the documentation. Btw, here’s how you do it:</p>

<pre><code>./bin/phd restart</code></pre>

<p>Right from the Phabricator folder.</p>

<p>Moving on.</p>

<p>Now that sending was settled there was one huge thing that wasn’t working. Inbound emails. I tried working with postfix but, it was too painful and after a couple of hours I didn’t get anywhere. The <a href="https://secure.phabricator.com/book/phabricator/article/configuring_inbound_email/">documentation</a> talks about using sendgrid to achieve it but, I already have a mailgun account and according to the configuration Phabricator should be able to use mailgun as well. So, I had to do some research.</p>

<p>It turns out you can use mailgun to do this but, there’s zero documentation about it. Luckily, I found the <a href="https://secure.phabricator.com/rPa9612fac24a9eb97ad3f611d84dfedbce98d17ad">commit</a> where this functionality was added and figured it out on my own. Here’s the three step guide to getting it done.</p>

<h2 id="step_1">Step 1</h2>

<p>You have to configure you domain’s MX records to point to mailgun. You can find more information <a href="http://documentation.mailgun.com/user_manual.html#verifying-your-domain">here</a>.</p>

<h2 id="step_2">Step 2</h2>

<p>Go to your setup your mailgun configuration by going to the mailgun config (http://example.com/config/group/mailgun/) and adding your API key and your domain.</p>

<h2 id="step_3">Step 3</h2>

<p>We’re almost done. Now, all we have to do is tell mailgun to send received emails your way. To do this all you have to do is create a new route (go here: <a href="https://mailgun.com/cp/routes">https://mailgun.com/cp/routes</a>). Give it a priority and a filter that’ll work for you (I used 0 as a priority and <code>catch_all()</code> for a filter). For the action, forward it to your Phabricator installation with the endpoint ‘/mail/mailgun’. Like this: <code>forward(&quot;http://example.com/mail/mailgun/&quot;)</code>.</p>

<p>That is all. Your emails should now allow you to interact with Phabricator.</p>
	</article>

	<article class="post" id="Sketch Presets for Desktop Screens">
		<header>
			<h1>
				<a href="/2014/04/05/Sketch-Presets-For-Desktop.html">Sketch Presets for Desktop Screens</a>
			</h1>
			<time>April 05, 2014</time>
		</header>

		<p>I’ve been using <a href="http://bohemiancoding.com/sketch/">Sketch</a> to create mock ups for clients lately. So far so good. Today, I wanted to create art board presets for common desktop screen sizes. It took me a little while to find out how to organize them into folders. Luckily for me, Jan Drewniak has a <a href="http://j4n.co/blog/custom-sketch-art-board-presets">blog post</a> detailing how to do just this.</p>

<blockquote>
<p>Sketch actually keeps these artboard presets in an artboards.sketchpreset file located somewhere on your mac. If you’re using the App Store version of Sketch, then the file is located here:</p>
</blockquote>

<pre><code>~/Library/Containers/com.bohemiancoding.sketch/Data/Library/Application  Support/sketch/</code></pre>

<p>Here’s my presets:</p>

<pre><code>&lt;dict&gt;
	&lt;key&gt;name&lt;/key&gt;
	&lt;string&gt;Desktop&lt;/string&gt;
	&lt;key&gt;presets&lt;/key&gt;
	&lt;array&gt;
		&lt;string&gt;Retina Displays&lt;/string&gt;
		&lt;dict&gt;
			&lt;key&gt;width&lt;/key&gt;
			&lt;integer&gt;2880&lt;/integer&gt;
			&lt;key&gt;name&lt;/key&gt;
			&lt;string&gt;15-inch&lt;/string&gt;
			&lt;key&gt;height&lt;/key&gt;
			&lt;integer&gt;1800&lt;/integer&gt;
		&lt;/dict&gt;
		&lt;dict&gt;
			&lt;key&gt;width&lt;/key&gt;
			&lt;integer&gt;2560&lt;/integer&gt;
			&lt;key&gt;name&lt;/key&gt;
			&lt;string&gt;13-inch&lt;/string&gt;
			&lt;key&gt;height&lt;/key&gt;
			&lt;integer&gt;1600&lt;/integer&gt;
		&lt;/dict&gt;
		&lt;string&gt;4:3&lt;/string&gt;
		&lt;dict&gt;
			&lt;key&gt;width&lt;/key&gt;
			&lt;integer&gt;1600&lt;/integer&gt;
			&lt;key&gt;name&lt;/key&gt;
			&lt;string&gt;Large 4:3&lt;/string&gt;
			&lt;key&gt;height&lt;/key&gt;
			&lt;integer&gt;1200&lt;/integer&gt;
		&lt;/dict&gt;
		&lt;dict&gt;
			&lt;key&gt;width&lt;/key&gt;
			&lt;integer&gt;1280&lt;/integer&gt;
			&lt;key&gt;name&lt;/key&gt;
			&lt;string&gt;Medium 4:3&lt;/string&gt;
			&lt;key&gt;height&lt;/key&gt;
			&lt;integer&gt;1024&lt;/integer&gt;
		&lt;/dict&gt;
		&lt;string&gt;16:9&lt;/string&gt;
		&lt;dict&gt;
			&lt;key&gt;width&lt;/key&gt;
			&lt;integer&gt;1920&lt;/integer&gt;
			&lt;key&gt;name&lt;/key&gt;
			&lt;string&gt;Large 16:9&lt;/string&gt;
			&lt;key&gt;height&lt;/key&gt;
			&lt;integer&gt;1080&lt;/integer&gt;
		&lt;/dict&gt;
		&lt;dict&gt;
			&lt;key&gt;width&lt;/key&gt;
			&lt;integer&gt;1600&lt;/integer&gt;
			&lt;key&gt;name&lt;/key&gt;
			&lt;string&gt;Medium 16:9&lt;/string&gt;
			&lt;key&gt;height&lt;/key&gt;
			&lt;integer&gt;900&lt;/integer&gt;
		&lt;/dict&gt;
		&lt;dict&gt;
			&lt;key&gt;width&lt;/key&gt;
			&lt;integer&gt;1366&lt;/integer&gt;
			&lt;key&gt;name&lt;/key&gt;
			&lt;string&gt;Small 16:9&lt;/string&gt;
			&lt;key&gt;height&lt;/key&gt;
			&lt;integer&gt;768&lt;/integer&gt;
		&lt;/dict&gt;
	&lt;/array&gt;
&lt;/dict&gt;</code></pre>

<p>I have categories for: Retina, 16:9 and 5:4 displays. Only listing the ones I’ve used recently and might re-use in the future.</p>
	</article>

	<article class="post" id="Scroll Spying for Fun and Profit">
		<header>
			<h1>
				<a href="/2014/04/04/scroll-spying-for-fun-and-profit.html">Scroll Spying for Fun and Profit</a>
			</h1>
			<time>April 04, 2014</time>
		</header>

		<p>I recently redesigned by blog. One of the new features is a menu that highlights the current post you are on. <img class='small' src='http://f.cl.ly/items/133x0c1u0K0g0Y3g0g1W/scrollspying.gif' /></p>

<p>To achieve this, I used <a href="http://zeptojs.com/">Zepto</a> and a small amount of math. (The great thing about Zepto is that it’s fully compatible with jQuery, so this should work with jQuery out of the both as well).</p>

<p>Let’s jump right in, here’s how I do it:</p>
<pre>
<code>
$(window).on('scroll', function() {
	var scrollTop = $(window).scrollTop();
	var article_offsets = $('article').map(function(i) { 
		if (i === 0) {
			return 0;
		}

		return $(this).offset().top 
	});

	for (var i = 0; i &lt; article_offsets.length; i++) {
		if (article_offsets[i] - 40 &lt;= scrollTop) {
			$('.sidebar li').removeClass('active')
				.eq(i).addClass('active');
		}
	};
});
</code>
</pre>
<p>The first line of interest:</p>

<pre><code>var article_offsets = $(&#39;article&#39;).map(function(i) { 
	if (i === 0) {
		return 0;
	}

	return $(this).offset().top 
});</code></pre>

<p>Grabs all the vertical positions (from now on, offsets) of the elements I want to match and makes an array out of them. In this case, I am targeting the articles since, those represent my blog posts. I make sure to mark the first one as 0, so it works when the page first loads at scroll position 0.</p>

<p>After doing this, we iterate over all our scroll positions, if we find ourselves scrolled after one of the offsets we run this:</p>

<pre><code>$(&#39;.sidebar li&#39;).removeClass(&#39;active&#39;).eq(i).addClass(&#39;active&#39;);</code></pre>

<p>This looks for the Ith element on the sidebar’s list and we add a class of ‘active’ to it, highlighting it and doing whatever we want with it.</p>

<p>There’s a couple of other (bigger, more complex and probably more robust) solutions to this problem out there. Here’s a couple I came through:</p>

<ul>
<li><a href="http://getbootstrap.com/javascript/#scrollspy">http://getbootstrap.com/javascript/#scrollspy</a></li>

<li><a href="http://www.outyear.co.uk/smint/">http://www.outyear.co.uk/smint/</a></li>

<li><a href="http://scrollnav.com/">http://scrollnav.com/</a></li>
</ul>

<p>I am pretty sure they are plenty of others but, for my evil purposes, my tiny script fulfills my needs.</p>
	</article>

	<article class="post" id="2014">
		<header>
			<h1>
				<a href="/2014/01/26/2014.html">2014</a>
			</h1>
			<time>January 26, 2014</time>
		</header>

		<p>I know I am a little late doing the whole goal setting and year review thing but, this year I wanted to try something different. I wanted to see how January turned out before setting goals.</p>

<p>This year will be pretty exciting. I’ll continue working as a consultant as I have for the past couple of years. Invivo Link is doing some pretty cool things and I am happy to help them continue building their product. Over at <a href="http://www.2build.it">2build.it</a>, we’re working with some pretty cool clients, building a variety of pretty cool things, hopefully the company will grow a whole lot this year.</p>

<p>I tend to decide what I’d like to learn more during the year. This year’s language is going to be Rust. I’ve fallen in love with it on the past couple of months and I’d like to start building more things with it as the language becomes more stable. Apart from Rust, this year I’ll be working with Objective-C a whole lot more. I don’t fully like the language yet but, I feel like it can be a valuable tool in my toolset. I’ll also continue working on bundle.js as it has become essential to a client’s project which, turns out to be a great way to further develop it.</p>

<p>I’d also like to write more, I didn’t get to do it as much as I wanted to last year so I’ve adjusted my goal, I want to write at least, 12 posts during the year. I think this is a reasonable quantity and I hope I’ll be able to reach it. I’d also like to read more, my goal for that is at least 52 books. I am up to speed so far so I am pretty sure I can reach that.</p>

<p>Finally, I’d like a travel more this year, I am getting a little tired and burned out and I feel that it would help me to travel and see things.</p>

<p>I achieved most of the important goals from last year so, I am looking forward to a great year.</p>
	</article>

	<article class="post" id="You've Gotta Love Deferreds">
		<header>
			<h1>
				<a href="/2013/11/12/youve-gotta-love-deferreds.html">You've Gotta Love Deferreds</a>
			</h1>
			<time>November 12, 2013</time>
		</header>

		<p>Deferreds are awesome. They are such a simple solution to a really hard problem. Keeping things async in javascript can get hard sometimes. I recently wrote some code that looked like this:</p>
<pre>
<code data-language='html'>
var settings = {
	template: 'todo.hbs',
	data_src: '/todo.json'
};
	
var template;
	
var getting_template;
var getting_data;
	
if ('template' in settings) {
	getting_template = $.get(settings.template);
	
	getting_template.done(function(t) {
		template = t;
	});
	
	if ('data_src' in settings) {
		getting_data = $.get(settings.data_src);
		getting_data.done(function(data) {
			render(template, data);
		});
	} else {
		getting_template.done(function(t) {
			render(t, {});
		});
	}
} else {
	render('', {});
}
</code>
</pre>
<p>(I am pretty sure it wasn’t necessarily as ugly but, I don’t quite remember.)</p>

<p>As you can see, even though I am making use of the deferreds returned by the <code>$.get</code> function. This could be cleaned up a lot by using even more deferreds.</p>

<p>Here’s more or less what the code ended up looking like:</p>
<pre>
<code data-language='html'>
var settings = {
	template: 'todo.hbs',
	data_src: '/todo.json'
};

var templateDefer = new $.Deferred();
var dataDefer; = new $.Deferred();

if ('template' in settings) {
	$.get(settings.template, function(template) {
		templateDefer.resolve(template);
	});
} else {
	templateDefer.resolve('');
}

if ('data_src' in settings) {
	$.get(settings.data_src, function(data) {
		dataDefer.resolve(data);
	});
} else {
	dataDefer.resolve({});
}

$.when(templateDefer, dataDefer).done(function(template, data) {
	render(template, data);
});
</code>
</pre>
<p>I basically kept everything async using stand-alone deferreds. Turns out jQuery has really handy deferred util built-in, all you have to do is create a new one (<code>new $.Deferred()</code>). The other handy thing built into jQuery is the <code>$.when</code> method, you can basically pass in a bunch of deferreds and you’d get a single one that responds when all of them respond in a particular way. That way, you can basically say, when they are all done, do this.</p>

<p>I shall try experimenting a lot more with these tools, they are pretty easy to use and pack in, so much functionality.</p>

<h2 id="recommended_links">Recommended links</h2>

<p>Here’s a couple of recommended links, in case you want to learn more about deffereds, in particular, those built into jQuery:</p>

<ul>
<li><a href="http://api.jquery.com/category/deferred-object/">jQuery’s Deferred Object Documentation</a></li>

<li><a href="http://vvv.tobiassjosten.net/javascript/jquery-deferreds-promises-asynchronous-bliss/">jQuery Deferreds promises asynchronous bliss</a></li>

<li><a href="http://promises-aplus.github.io/promises-spec/">Promises A+ Spec</a></li>
</ul>
	</article>

</div>


<div class="sidebar">
	<div class="icons">
		<a href="https://www.github.com/seich" class="github">&#62208;</a>
		<a href="https://www.twitter.com/seich" class="twitter">&#62217;</a>
		<a href="http://www.last.fm/user/Seichleon" class="lastfm">&#62241;</a>
	</div>
	<ul>
	
		<li>
			<a href="#Using mailgun to receive emails with Phabricator">Using mailgun to receive emails with Phabricator</a>
			<time>April 21, 2014</time>
		</li>
	
		<li>
			<a href="#Sketch Presets for Desktop Screens">Sketch Presets for Desktop Screens</a>
			<time>April 05, 2014</time>
		</li>
	
		<li>
			<a href="#Scroll Spying for Fun and Profit">Scroll Spying for Fun and Profit</a>
			<time>April 04, 2014</time>
		</li>
	
		<li>
			<a href="#2014">2014</a>
			<time>January 26, 2014</time>
		</li>
	
		<li>
			<a href="#You've Gotta Love Deferreds">You've Gotta Love Deferreds</a>
			<time>November 12, 2013</time>
		</li>
	
	</ul>

	
	<div class="pagination">
		
			<span class="previous">Previous Page</span>
		
		/
		
			<a href="/page2" class="next">Next Page</a>
		

		<p>-1-</p>
	</div>
	
</div>

	<footer>
		David Sergio Díaz &copy; All Rights Reserved.
		<br>
		Happily hosted on <a href="http://www.webfaction.com?affiliate=seich">WebFaction</a>
	</footer>
</div>

	<script src="/js/zepto.js"></script>
	<script src="/js/main.js"></script>
	<script>
        var _gaq=[['_setAccount','UA-2565966-9'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.async=1;
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
    </script>
</body>
</html>