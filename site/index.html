<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>


	<title>Seichy's Missing Bit </title>
	
	<link rel="stylesheet" href="/css/screen.css">
	<link rel="alternate" type="application/rss+xml" title="RSS Feed for martianwabbit.com" href="http://feeds.feedburner.com/SeichysMissingBit" />

	<script src="/js/highlight.pack.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>
</head>
<body>

<div class="container">
	<header id="top">
		<h1>
			<a href="/">Seichy's Missing Bit</a>
		</h1>
	</header>

	<div class="content">

	<article class="post" id="Using MapKit with Swift">
		<header>
			<h1>
				<a href="/2014/07/29/using-mapkit-with-swift.html">Using MapKit with Swift</a>
			</h1>
			<time>July 29, 2014</time>
		</header>

		<p>I&#39;ve been using Swift a lot lately. I wanted to start making iOS apps a while ago but Objective-C is frankly, not worth the trouble. Swift on the other hand is actually fun to use and I love experiencing how the language evolves.</p>

<p>This weekend I started working on a small app I&#39;ve wanted for a while but got stuck when it came to implementing a map with MapKit. I couldn&#39;t find documentation or code samples on how to do it anywhere. Turns out that it&#39;s not hard at all! It took very little fiddling around before I figured it out. Here&#39;s how I did it:</p>

<h2>First, create a new project</h2>

<p>I started with a <strong>Single View Application</strong>. </p>

<p><img src="http://f.cl.ly/items/012e0M1g1z360Q3N1f2C/step_1.png" alt="">
Then added a MKMapView to the view controller. After that, imported <code>MapKit</code> into the view controller&#39;s code. Finally, I added a new reference outlet to the map called <em>map</em>.</p>

<p><video controls>
    <source src="https://dl.dropboxusercontent.com/u/8252879/swiftmaps_step_1.mp4" type="video/mp4; codecs=avc1.42E01E,mp4a.40.2">
    <source src="https://dl.dropboxusercontent.com/u/8252879/swiftmaps_step_1.webm" type="video/webm; codecs=vp8,vorbis">
</video></p>

<h2>Setup your desired location</h2>

<p>Now our map is ready to display a location. You&#39;ll need a couple of things to set it to the right place. First, you need a location in the form of a latitude and longitude and a CLLocationCoordinate2D.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">var location = CLLocationCoordinate2D(
    latitude: 16.40, 
    longitude: -86.34
)
</code></pre></div>
<p>Now, we need to tell the map what the area spanned by the region is. For this we use <code>MKCoordinateSpanMake</code>. Which, as you probably guessed, creates a <code>MKCoordinateSpan</code>.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">var span = MKCoordinateSpanMake(1, 1)
</code></pre></div>
<p>After that we just need to define the region using these two things:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">var region = MKCoordinateRegion(center: location, span: span)
</code></pre></div>
<p>And finally, we set this region to the map:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">map.setRegion(region, animated: true)
</code></pre></div>
<h2>Bonus: Adding an annotation</h2>

<p>Adding an annotation is actually quite easy. We start by creating a new MKPointAnnotation instance. It&#39;ll display the default red pin which, might not be as pretty but it&#39;ll get the job done.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">var annotation = MKPointAnnotation()
</code></pre></div>
<p>Afterwards, we can set it&#39;s coordinates, title and subtitle to place it wherever we want and to add the text it&#39;s callout will display when tapped.</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">annotation.setCoordinate(location)
annotation.title = &quot;Roatan&quot;
annotation.subtitle = &quot;Honduras&quot;
</code></pre></div>
<p>Finally, we add it to the map like this:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">map.addAnnotation(annotation)
</code></pre></div>
<p>Here&#39;s my final code:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">import UIKit
import MapKit

class ViewController: UIViewController {

    @IBOutlet weak var map: MKMapView!
    override func viewDidLoad() {
        super.viewDidLoad()

        var location = CLLocationCoordinate2D(
            latitude: 16.40, 
            longitude: -86.34
        )

        var span = MKCoordinateSpanMake(0.5, 0.5)
        var region = MKCoordinateRegion(center: location, span: span)

        map.setRegion(region, animated: true)

        var annotation = MKPointAnnotation()
        annotation.setCoordinate(location)
        annotation.title = &quot;Roatan&quot;
        annotation.subtitle = &quot;Honduras&quot;

        map.addAnnotation(annotation)
    }
}
</code></pre></div>
<p>And here&#39;s what my app looks like:
<img src="http://f.cl.ly/items/2r0a21423A3l2S381U3w/final.png" alt="Final product" class="small"></p>

<h2>Additional Resources</h2>

<p><a href="https://developer.apple.com/library/ios/documentation/userexperience/Conceptual/LocationAwarenessPG/AnnotatingMaps/AnnotatingMaps.html">Location and Maps Programming Guide</a></p>

	</article>

	<article class="post" id="Using mailgun to receive emails with Phabricator">
		<header>
			<h1>
				<a href="/2014/04/21/using-mailgun-to-receive-emails-with-phabrication.html">Using mailgun to receive emails with Phabricator</a>
			</h1>
			<time>April 21, 2014</time>
		</header>

		<p><a href="http://phabricator.com">Phabricator</a> is awesome. We recently started trying it out for <a href="http://2build.it">2build.it</a> (more like, this morning) and we all (<a href="http://jorge.caballeromurillo.com">Jorge</a> and I) agreed it&#39;s awesome. </p>

<p>The setup is pretty straight-forward and only took like 20 minutes. The one thing I got stuck on though, was the emailing. It took me forever to realise that you&#39;re supposed to restart the emailing daemons for the configuration to stick. It is my fault but, this wasn&#39;t mentioned anywhere in the documentation. Btw, here&#39;s how you do it:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">./bin/phd restart
</code></pre></div>
<p>Right from the Phabricator folder.</p>

<p>Moving on.</p>

<p>Now that sending was settled there was one huge thing that wasn&#39;t working. Inbound emails. I tried working with postfix but, it was too painful and after a couple of hours I didn&#39;t get anywhere. The <a href="https://secure.phabricator.com/book/phabricator/article/configuring_inbound_email/">documentation</a> talks about using sendgrid to achieve it but, I already have a mailgun account and according to the configuration Phabricator should be able to use mailgun as well. So, I had to do some research.</p>

<p>It turns out you can use mailgun to do this but, there&#39;s zero documentation about it. Luckily, I found the <a href="https://secure.phabricator.com/rPa9612fac24a9eb97ad3f611d84dfedbce98d17ad">commit</a> where this functionality was added and figured it out on my own. Here&#39;s the three step guide to getting it done.</p>

<h2>Step 1</h2>

<p>You have to configure you domain&#39;s MX records to point to mailgun. You can find more information <a href="http://documentation.mailgun.com/user_manual.html#verifying-your-domain">here</a>.</p>

<h2>Step 2</h2>

<p>Go to your setup your mailgun configuration by going to the mailgun config (http://example.com/config/group/mailgun/) and adding your API key and your domain.</p>

<h2>Step 3</h2>

<p>We&#39;re almost done. Now, all we have to do is tell mailgun to send received emails your way. To do this all you have to do is create a new route (go here: <a href="https://mailgun.com/cp/routes">https://mailgun.com/cp/routes</a>). Give it a priority and a filter that&#39;ll work for you (I used 0 as a priority and <code>catch_all()</code> for a filter). For the action, forward it to your Phabricator installation with the endpoint &#39;/mail/mailgun&#39;. Like this: <code>forward(&quot;http://example.com/mail/mailgun/&quot;)</code>.</p>

<p>That is all. Your emails should now allow you to interact with Phabricator.</p>

	</article>

	<article class="post" id="Sketch Presets for Desktop Screens">
		<header>
			<h1>
				<a href="/2014/04/05/Sketch-Presets-For-Desktop.html">Sketch Presets for Desktop Screens</a>
			</h1>
			<time>April 05, 2014</time>
		</header>

		<p>I&#39;ve been using <a href="http://bohemiancoding.com/sketch/">Sketch</a> to create mock ups for clients lately. So far so good. Today, I wanted to create art board presets for common desktop screen sizes. It took me a little while to find out how to organize them into folders. Luckily for me, Jan Drewniak has a <a href="http://j4n.co/blog/custom-sketch-art-board-presets">blog post</a> detailing how to do just this.</p>

<blockquote>
<p>Sketch actually keeps these artboard presets in an artboards.sketchpreset file located somewhere on your mac. If you&#39;re using the App Store version of Sketch, then the file is located here:</p>
</blockquote>
<div class="highlight"><pre><code class="text language-text" data-lang="text">~/Library/Containers/com.bohemiancoding.sketch/Data/Library/Application  Support/sketch/
</code></pre></div>
<p>Here&#39;s my presets:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">&lt;dict&gt;
    &lt;key&gt;name&lt;/key&gt;
    &lt;string&gt;Desktop&lt;/string&gt;
    &lt;key&gt;presets&lt;/key&gt;
    &lt;array&gt;
        &lt;string&gt;Retina Displays&lt;/string&gt;
        &lt;dict&gt;
            &lt;key&gt;width&lt;/key&gt;
            &lt;integer&gt;2880&lt;/integer&gt;
            &lt;key&gt;name&lt;/key&gt;
            &lt;string&gt;15-inch&lt;/string&gt;
            &lt;key&gt;height&lt;/key&gt;
            &lt;integer&gt;1800&lt;/integer&gt;
        &lt;/dict&gt;
        &lt;dict&gt;
            &lt;key&gt;width&lt;/key&gt;
            &lt;integer&gt;2560&lt;/integer&gt;
            &lt;key&gt;name&lt;/key&gt;
            &lt;string&gt;13-inch&lt;/string&gt;
            &lt;key&gt;height&lt;/key&gt;
            &lt;integer&gt;1600&lt;/integer&gt;
        &lt;/dict&gt;
        &lt;string&gt;4:3&lt;/string&gt;
        &lt;dict&gt;
            &lt;key&gt;width&lt;/key&gt;
            &lt;integer&gt;1600&lt;/integer&gt;
            &lt;key&gt;name&lt;/key&gt;
            &lt;string&gt;Large 4:3&lt;/string&gt;
            &lt;key&gt;height&lt;/key&gt;
            &lt;integer&gt;1200&lt;/integer&gt;
        &lt;/dict&gt;
        &lt;dict&gt;
            &lt;key&gt;width&lt;/key&gt;
            &lt;integer&gt;1280&lt;/integer&gt;
            &lt;key&gt;name&lt;/key&gt;
            &lt;string&gt;Medium 4:3&lt;/string&gt;
            &lt;key&gt;height&lt;/key&gt;
            &lt;integer&gt;1024&lt;/integer&gt;
        &lt;/dict&gt;
        &lt;string&gt;16:9&lt;/string&gt;
        &lt;dict&gt;
            &lt;key&gt;width&lt;/key&gt;
            &lt;integer&gt;1920&lt;/integer&gt;
            &lt;key&gt;name&lt;/key&gt;
            &lt;string&gt;Large 16:9&lt;/string&gt;
            &lt;key&gt;height&lt;/key&gt;
            &lt;integer&gt;1080&lt;/integer&gt;
        &lt;/dict&gt;
        &lt;dict&gt;
            &lt;key&gt;width&lt;/key&gt;
            &lt;integer&gt;1600&lt;/integer&gt;
            &lt;key&gt;name&lt;/key&gt;
            &lt;string&gt;Medium 16:9&lt;/string&gt;
            &lt;key&gt;height&lt;/key&gt;
            &lt;integer&gt;900&lt;/integer&gt;
        &lt;/dict&gt;
        &lt;dict&gt;
            &lt;key&gt;width&lt;/key&gt;
            &lt;integer&gt;1366&lt;/integer&gt;
            &lt;key&gt;name&lt;/key&gt;
            &lt;string&gt;Small 16:9&lt;/string&gt;
            &lt;key&gt;height&lt;/key&gt;
            &lt;integer&gt;768&lt;/integer&gt;
        &lt;/dict&gt;
    &lt;/array&gt;
&lt;/dict&gt;
</code></pre></div>
<p>I have categories for: Retina, 16:9 and 5:4 displays. Only listing the ones I&#39;ve used recently and might re-use in the future.</p>

	</article>

	<article class="post" id="Scroll Spying for Fun and Profit">
		<header>
			<h1>
				<a href="/2014/04/04/scroll-spying-for-fun-and-profit.html">Scroll Spying for Fun and Profit</a>
			</h1>
			<time>April 04, 2014</time>
		</header>

		<p>I recently redesigned by blog. One of the new features is a menu that highlights the current post you are on.
<img src="http://f.cl.ly/items/133x0c1u0K0g0Y3g0g1W/scrollspying.gif" class="small"></p>

<p>To achieve this, I used <a href="http://zeptojs.com/">Zepto</a> and a small amount of math. (The great thing about Zepto is that it&#39;s fully compatible with jQuery, so this should work with jQuery out of the box as well).</p>

<p>Let&#39;s jump right in, here&#39;s how I do it:</p>

<pre>
<code>
$(window).on('scroll', function() {
    var scrollTop = $(window).scrollTop();
    var article_offsets = $('article').map(function(i) { 
        if (i === 0) {
            return 0;
        }

        return $(this).offset().top 
    });

    for (var i = 0; i &lt; article_offsets.length; i++) {
        if (article_offsets[i] - 40 &lt;= scrollTop) {
            $('.sidebar li').removeClass('active')
                .eq(i).addClass('active');
        }
    };
});
</code>
</pre>

<p>The first line of interest:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">var article_offsets = $(&#39;article&#39;).map(function(i) { 
    if (i === 0) {
        return 0;
    }

    return $(this).offset().top 
});
</code></pre></div>
<p>Grabs all the vertical positions (from now on, offsets) of the elements I want to match and makes an array out of them. In this case, I am targeting the articles since, those represent my blog posts. I make sure to mark the first one as 0, so it works when the page first loads at scroll position 0.</p>

<p>After doing this, we iterate over all our scroll positions, if we find ourselves scrolled after one of the offsets we run this:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">$(&#39;.sidebar li&#39;).removeClass(&#39;active&#39;).eq(i).addClass(&#39;active&#39;);
</code></pre></div>
<p>This looks for the Ith element on the sidebar&#39;s list and we add a class of &#39;active&#39; to it, highlighting it and doing whatever we want with it.</p>

<p>There&#39;s a couple of other (bigger, more complex and probably more robust) solutions to this problem out there. Here&#39;s a couple I came through:</p>

<ul>
<li><a href="http://getbootstrap.com/javascript/#scrollspy">http://getbootstrap.com/javascript/#scrollspy</a></li>
<li><a href="http://www.outyear.co.uk/smint/">http://www.outyear.co.uk/smint/</a></li>
<li><a href="http://scrollnav.com/">http://scrollnav.com/</a></li>
</ul>

<p>I am pretty sure they are plenty of others but, for my evil purposes, my tiny script fulfills my needs.</p>

	</article>

	<article class="post" id="2014">
		<header>
			<h1>
				<a href="/2014/01/26/2014.html">2014</a>
			</h1>
			<time>January 26, 2014</time>
		</header>

		<p>I know I am a little late doing the whole goal setting and year review thing but, this year I wanted to try something different. I wanted to see how January turned out before setting goals.</p>

<p>This year will be pretty exciting. I&#39;ll continue working as a consultant as I have for the past couple of years. Invivo Link is doing some pretty cool things and I am happy to help them continue building their product. Over at <a href="http://www.2build.it">2build.it</a>, we&#39;re working with some pretty cool clients, building a variety of pretty cool things, hopefully the company will grow a whole lot this year.</p>

<p>I tend to decide what I&#39;d like to learn more during the year. This year&#39;s language is going to be Rust. I&#39;ve fallen in love with it on the past couple of months and I&#39;d like to start building more things with it as the language becomes more stable. Apart from Rust, this year I&#39;ll be working with Objective-C a whole lot more. I don&#39;t fully like the language yet but, I feel like it can be a valuable tool in my toolset. I&#39;ll also continue working on bundle.js as it has become essential to a client&#39;s project which, turns out to be a great way to further develop it. </p>

<p>I&#39;d also like to write more, I didn&#39;t get to do it as much as I wanted to last year so I&#39;ve adjusted my goal, I want to write at least, 12 posts during the year. I think this is a reasonable quantity and I hope I&#39;ll be able to reach it. I&#39;d also like to read more, my goal for that is at least 52 books. I am up to speed so far so I am pretty sure I can reach that.</p>

<p>Finally, I&#39;d like a travel more this year, I am getting a little tired and burned out and I feel that it would help me to travel and see things. </p>

<p>I achieved most of the important goals from last year so, I am looking forward to a great year.</p>

	</article>

</div>


<div class="sidebar">
	<div class="icons">
		<a href="https://www.github.com/seich" class="github">&#62208;</a>
		<a href="https://www.twitter.com/seich" class="twitter">&#62217;</a>
		<a href="http://www.last.fm/user/Seichleon" class="lastfm">&#62241;</a>
	</div>
	<ul>
	
		<li>
			<a href="#Using MapKit with Swift">Using MapKit with Swift</a>
			<time>July 29, 2014</time>
		</li>
	
		<li>
			<a href="#Using mailgun to receive emails with Phabricator">Using mailgun to receive emails with Phabricator</a>
			<time>April 21, 2014</time>
		</li>
	
		<li>
			<a href="#Sketch Presets for Desktop Screens">Sketch Presets for Desktop Screens</a>
			<time>April 05, 2014</time>
		</li>
	
		<li>
			<a href="#Scroll Spying for Fun and Profit">Scroll Spying for Fun and Profit</a>
			<time>April 04, 2014</time>
		</li>
	
		<li>
			<a href="#2014">2014</a>
			<time>January 26, 2014</time>
		</li>
	
	</ul>

	
	<div class="pagination">
		
			<span class="previous">Previous Page</span>
		
		/
		
			<a href="/page2" class="next">Next Page</a>
		

		<p>-1-</p>
	</div>
	
</div>

	<footer>
		David Sergio Díaz &copy; All Rights Reserved.
		<br>
		Happily hosted on <a href="http://www.webfaction.com?affiliate=seich">WebFaction</a>
	</footer>
</div>

	<script src="/js/main.js"></script>
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-2565966-9', 'auto');
		ga('send', 'pageview');
	</script>
</body>
</html>